# PRODUCTION DATABASE CONFIGURATION FOR RENDER.COM
# Copy this to .env and update with your actual values

# CRITICAL: Use these optimized connection parameters for Render PostgreSQL
# These settings fix P2024 connection timeout errors

# Option 1: Direct URL (RECOMMENDED for Render)
DIRECT_URL=postgresql://username:password@host:5432/database?connection_limit=20&pool_timeout=60&connect_timeout=30&statement_cache_size=0&prepared_statement_cache_queries=0&pgbouncer=true&sslmode=require

# Option 2: Regular DATABASE_URL (fallback)
DATABASE_URL=postgresql://username:password@host:5432/database?connection_limit=20&pool_timeout=60&connect_timeout=30&statement_cache_size=0&prepared_statement_cache_queries=0&sslmode=require

# EXPLANATION OF CRITICAL PARAMETERS:
# connection_limit=20     - Increased from 3 to handle concurrent requests
# pool_timeout=60         - Increased from 20s to handle Render latency  
# connect_timeout=30      - Increased connection timeout for stability
# statement_cache_size=0  - Disable to prevent prepared statement conflicts
# prepared_statement_cache_queries=0 - Disable prepared statements completely
# pgbouncer=true         - Enable connection pooling for better performance
# sslmode=require        - Force SSL for security

# OTHER REQUIRED ENVIRONMENT VARIABLES
NODE_ENV=production
PORT=3000
JWT_SECRET=your-jwt-secret-here

# GOOGLE AUTH (if using Google Sign-In)
GOOGLE_CLIENT_ID=your-google-client-id-here

# SUPABASE (if using Supabase storage)
NEXT_PUBLIC_SUPABASE_URL=your-supabase-url-here
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-supabase-anon-key-here

# RENDER DEPLOYMENT NOTES:
# 1. Set these environment variables in Render dashboard
# 2. Use DIRECT_URL for best performance on Render
# 3. Monitor connection pool usage in logs
# 4. Restart service if you see persistent P2024 errors
